---
title: "Network Degree"
description: |
  Network Degree of Football Networks
author:
  - name: Isha Akshita Mahajan
    affiliation: UMass Amherst
date: 2022-05-08
output:
  distill::distill_article:
    self_contained: false
---

## Density 

```{r}
graph.density(ig)
```

The network density of the football transfer network is 3.33 which indicated that 33.3% of all possible ties in the network are made. In this case we would leave the loops value as false because it is not possible for a football team to transfer a player back to their own team. 

## Degree

The degree measures the node centrality or a popularity of a node. It gives a count of the relationships that a node is involved in or the number of edges it has. Given that the goal of these blogs to keep all these important network properties in one place, I begin by creating a dataframe that I'll keep on building as I create these blogs. I call this data frame `transfer.nodes`. 

```{r}
#create degree column
transfer.nodes<-data.frame(name=V(ig)$name, degree=igraph::degree(ig))
#create indegree and outdegree column
transfer.nodes<-transfer.nodes %>%
           mutate(indegree=igraph::degree(ig, mode="in", loops=FALSE),
           outdegree=igraph::degree(ig, mode="out", loops=FALSE))
```


```{r}
# clubs that have the highest relationships in the network
degree <- transfer.nodes %>% 
  arrange(desc(degree)) 
kable(head(degree))
# Clubs that recieved the most transfers.
indegree <- transfer.nodes %>% 
  arrange(desc(indegree)) 
kable(head(indegree))
# Clubs that transferred the most.
outdegree <- transfer.nodes %>% 
  arrange(desc(outdegree)) 
kable(head(outdegree))
```

Chelsea FC has the highest degree which means that it's going to be one of the key nodes in the network. They also have the highest indegree which means that they're recieved a lot of transfers in the last four years. Real Madrid has the highest outdegee which means they transferred 400 players in the last four years. 

## Degree Distributions

```{r}
#create a histogram of Transfer Indegree
hist(transfer.nodes$indegree, main="Football Transfers: In-degree Distribution", xlab="Players Recieved")
```

```{r}
#create a histogram of Transfer Indegree
hist(transfer.nodes$outdegree, main="Football Transfers: Out-degree Distribution", xlab="Players Transferred")
```

## Network Degree Centralization

**Add Interpretation, check if loops are supposed to be true or false** 

```{r}
#get network centralization score: igraph
centr_degree(ig, loops = FALSE, mode="in")$centralization
centr_degree(ig, loops = FALSE, mode="out")$centralization
```



## Visualization - An Attempt

```{r}
library(ggraph)
ggraph(ig, layout = "stress") + 
  geom_edge_link(
    arrow = arrow(), 
    start_cap = circle(2, "mm"),
    end_cap = circle(2, "mm")
  ) + 
  geom_node_point(size = 4) + 
  scale_edge_alpha_identity()
```

```{r}
ggplot(ig, aes(x = x, y = y, xend = xend, yend = yend)) +
  geom_edges(color = "grey25", alpha = 0.25, arrow = arrow(length = unit(2, "pt"), type = "closed"))+
  geom_nodes(color = "gold", alpha = 0.5, size = 2) +
  geom_nodetext(aes( label = vertex.names ), size=1)+
    ggtitle("Football Transfer Networks") +
  theme_blank()
```


## Create some  more network objects
```{r}
transfers_edgelist <- as.matrix(transfers)
#transfers_edgelist <- graph.edgelist(transfers_edgelist, directed=TRUE)
transfers.ig <-graph_from_data_frame(transfers)
transfers_network <- asNetwork(transfers.ig)
summary(transfers_network)
```

```{r}
library(ggnetwork)
library(ggthemes)
ggplot(transfers_network, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_edges(color = "grey25", alpha = 0.50, arrow = arrow(length = unit(4, "pt"), type = "closed"))+
  geom_nodes( alpha = 0.5, size = 4) +
  geom_nodetext(aes(label = vertex.names),colour = "Black", size=1)+
  ggtitle("Football Networks 2018-2021") +
  geom_edgetext(aes(label = club_from), colour = "red", size=1)+
  theme_fivethirtyeight()
```


