[
  {
    "path": "posts/2022-05-10-community-detection/",
    "title": "Community Detection",
    "description": "Detecting Communities in out Football Transfer Network",
    "author": [
      {
        "name": "Isha Akshita Mahajan, Ankit Kumar",
        "url": {}
      }
    ],
    "date": "2022-05-10",
    "categories": [],
    "contents": "\nWeek 7: Community Detection\nFast and Greedy Community Detection\nCreate Edgelist\n\n\nig.undirected <- as.undirected(ig)\n#Run clustering algorithm: fast_greedy\ntransfer.fg<-cluster_fast_greedy(ig.undirected)\n#Inspect clustering object\nnames(transfer.fg)\n\n\n\n\n\ntransfer.fg\n\n\n\n\n\n#retrieve list of nodes in communities\nigraph::groups(transfer.fg)\n\n\n\nAdding Community Membership to Node Info\n\n\n#Inspect community membership vector\ntransfer.fg$membership\n#Compare to vertex names vector\ntransfer.fg$names\n#Membership function\nmembership(transfer.fg)\n#Check order of vertex names\nV(ig)$name\n\n\n\n\n\n#add community membership as a node attribute\ntransfer.nodes$transfer.fg<-transfer.fg$membership\n#summarize node statistics by community\ntransfer.nodes%>%\n  select(-name)%>% group_by(transfer.fg)%>%\n  mutate(n=n())%>%\n  summarise_all(mean, na.rm=TRUE)%>%\n  as.matrix()%>%\n  print(digits=2)\n\n\n\n\n\nnodes.by.gp<-function(network.nodes, groupvar){\n  network.nodes%>%\n  select(-name)%>%\n  group_by_(groupvar) %>%\n  mutate(n=n())%>%\n  summarise_all(mean, na.rm=TRUE)%>%\n  as.matrix()%>%\n  print(digits=2)\n}\n\n\n\n\n\nplot(transfer.fg,ig)\n\n\n\n\nWalktrap Community Detection\n\n\n#Run clustering algorithm: walktrap\ntransfer.wt<-walktrap.community(ig)\n#Inspect community membership\n#igraph::groups(transfer.wt)\n\n\n\n\n\n#Run & inspect clustering algorithm: 10, 20, 100 steps\nigraph::groups(walktrap.community(ig, steps=10))\n#Run & inspect clustering algorithm: 10 steps\nigraph::groups(walktrap.community(ig, steps=20))\n\n\n\n\n\n#Run & inspect clustering algorithm: 10 steps\n#igraph::groups(walktrap.community(ig, steps=100))\n\n\n\n\n\n#inspect density of between/within community ties\n#print(blockmodel(matrix,transfer.wt$membership)$block.model, digits=2)\n\n\n\n\n\n#add community membership as a vertex attribute\ntransfer.nodes$transfer.wt<-transfer.wt$membership\n#summarize node statistics by community\nnodes.by.gp(transfer.nodes,\"transfer.wt\")\n\n\n\n\n\n#plot network with community coloring\nplot(transfer.wt,ig)\n\n\n\n\nCompare Community Partitions\n\n\n#compare community partition modularity scores\nmodularity(transfer.fg)\n\n\n[1] 0.3455725\n\n\n\nmodularity(transfer.wt)\n\n\n[1] 0.2372717\n\n\n\n#collect modularity scores to compare\nmods<-c(fastgreedy=modularity(transfer.fg), walktrap=modularity(transfer.wt))\nmods\n\n\nfastgreedy   walktrap \n 0.3455725  0.2372717 \n\n\n\ncompare.algs<-function(alg.a,alg.b,compare.meth=c(\"vi\", \"nmi\", \"split.join\", \"rand\", \"adjusted.rand\")){\n  #create list of community objects and methods\n  comm.compare<-expand.grid(alg.a=alg.a, alg.b=alg.b, meth=compare.meth, result=NA, stringsAsFactors = FALSE)\n  #compare community partitions using a loop\nfor(i in 1:nrow(comm.compare)){\n  comm1<-get(comm.compare$alg.a[i])\n  comm2<-get(comm.compare$alg.b[i])\n  method<-comm.compare$meth[i]\n  comm.compare$result[i]<-compare(comm1, comm2, method)\n}\n  return(comm.compare)\n}\n\n\n\n\n\n#compare community partitions\ncompare.algs(alg.a=c(\"transfer.fg\"),alg.b=\"transfer.wt\")\n\n\n        alg.a       alg.b          meth       result\n1 transfer.fg transfer.wt            vi   3.70408455\n2 transfer.fg transfer.wt           nmi   0.44915835\n3 transfer.fg transfer.wt    split.join 846.00000000\n4 transfer.fg transfer.wt          rand   0.83939469\n5 transfer.fg transfer.wt adjusted.rand   0.07531851\n\nLeading Label Propogation\n\n\n#Run clustering algorithm: leading label\ntransfer.lab<-label.propagation.community(ig)\n#Inspect community membership\nigraph::groups(transfer.lab)\n\n\n\n\n\n#add community membership as a vertex attribute\ntransfer.nodes$transfer.lab<-transfer.lab$membership\n#summarize node statistics by community\nnodes.by.gp(transfer.nodes,\"transfer.lab\")\n\n\n\n\n\n#plot network with community coloring\nplot(transfer.lab,ig)\n\n\n\n\n\n\n#compare community partitions\ncompare.algs(alg.a=c(\"transfer.fg\",\"transfer.wt\"),alg.b=\"transfer.lab\")\n\n\n         alg.a        alg.b          meth       result\n1  transfer.fg transfer.lab            vi   3.30638611\n2  transfer.wt transfer.lab            vi   2.14518570\n3  transfer.fg transfer.lab           nmi   0.43033391\n4  transfer.wt transfer.lab           nmi   0.73286114\n5  transfer.fg transfer.lab    split.join 765.00000000\n6  transfer.wt transfer.lab    split.join 517.00000000\n7  transfer.fg transfer.lab          rand   0.69744893\n8  transfer.wt transfer.lab          rand   0.76870150\n9  transfer.fg transfer.lab adjusted.rand   0.02651215\n10 transfer.wt transfer.lab adjusted.rand   0.15503792\n\nEdge Betweeness Community\n\n\n#Run clustering algorithm: edge betweenness\ntransfer.edge<-label.propagation.community(ig)\n#Inspect community membership\nigraph::groups(transfer.edge)\n\n\n\n\n\n#add community membership as a vertex attribute\ntransfer.nodes$transfer.edge<-transfer.edge$membership\n#summarize node statistics by community\nnodes.by.gp(transfer.nodes,\"transfer.edge\")\n\n\n\n\n\nplot(transfer.edge,ig)\n\n\n\n\n\n\n#collect modularity scores to compare\nmods<-c(mods, edge=modularity(transfer.edge))\nmods\n\n\nfastgreedy   walktrap       edge \n0.34557252 0.23727168 0.02395912 \n\n\n\n#compare community partitions\ncompare.algs(alg.a=c(\"transfer.fg\",\"transfer.wt\", \"transfer.lab\"), alg.b=\"transfer.edge\")\n\n\n          alg.a         alg.b          meth       result\n1   transfer.fg transfer.edge            vi   3.30168802\n2   transfer.wt transfer.edge            vi   2.12778654\n3  transfer.lab transfer.edge            vi   0.06725868\n4   transfer.fg transfer.edge           nmi   0.43057820\n5   transfer.wt transfer.edge           nmi   0.73483763\n6  transfer.lab transfer.edge           nmi   0.99053246\n7   transfer.fg transfer.edge    split.join 763.00000000\n8   transfer.wt transfer.edge    split.join 512.00000000\n9  transfer.lab transfer.edge    split.join  18.00000000\n10  transfer.fg transfer.edge          rand   0.69685491\n11  transfer.wt transfer.edge          rand   0.76874679\n12 transfer.lab transfer.edge          rand   0.99424897\n13  transfer.fg transfer.edge adjusted.rand   0.02721859\n14  transfer.wt transfer.edge adjusted.rand   0.15827861\n15 transfer.lab transfer.edge adjusted.rand   0.98443077\n\n#Eigenvector Community Detection\n.\n\n\n#Run clustering algorithm: leading eigenvector\ntransfer.eigen<-leading.eigenvector.community(ig)\n#Inspect community membership\nigraph::groups(transfer.eigen)\n\n\n\n\n\n#inspect density of between/within community ties\n#print(blockmodel(matrix,transfer.eigen$membership)$block.model, digits=2)\n\n\n\n\n\n#add community membership as a vertex attribute\ntransfer.nodes$transfer.eigen<-transfer.eigen$membership\n#summarize node statistics by community\nnodes.by.gp(transfer.nodes,\"transfer.eigen\")\n\n\n      transfer.eigen degree indegree outdegree transfer.fg\n [1,]              1   16.5     8.50       8.0         3.5\n [2,]              2    1.0     0.50       0.5        11.0\n [3,]              3    1.0     0.50       0.5         2.0\n [4,]              4    1.0     0.50       0.5        28.0\n [5,]              5    1.0     0.50       0.5        26.0\n [6,]              6    1.0     0.50       0.5        18.0\n [7,]              7    1.0     0.50       0.5        22.0\n [8,]              8    1.0     0.50       0.5        12.0\n [9,]              9    1.0     0.50       0.5        13.0\n[10,]             10    1.0     0.50       0.5        30.0\n[11,]             11    1.0     0.50       0.5        31.0\n[12,]             12    1.0     0.50       0.5        25.0\n[13,]             13    1.0     0.50       0.5        24.0\n[14,]             14    1.0     0.50       0.5        21.0\n[15,]             15    1.0     0.50       0.5        20.0\n[16,]             16    1.0     0.50       0.5        23.0\n[17,]             17    1.0     0.50       0.5        19.0\n[18,]             18    1.0     0.50       0.5        15.0\n[19,]             19    1.0     0.50       0.5        16.0\n[20,]             20    1.0     0.50       0.5        14.0\n[21,]             21   21.0    10.53      10.5         5.2\n[22,]             22   22.9    11.30      11.6         5.1\n[23,]             23   17.4     9.29       8.1         3.5\n[24,]             24   11.8     5.62       6.1         2.0\n[25,]             25   10.1     5.32       4.8         4.9\n[26,]             26   12.3     6.21       6.1         4.4\n[27,]             27    8.0     3.50       4.5         7.5\n[28,]             28    8.4     4.13       4.3         5.4\n[29,]             29    7.5     3.75       3.7         6.5\n[30,]             30    6.1     2.67       3.4         4.2\n[31,]             31    5.0     0.50       4.5         8.0\n[32,]             32    5.0     3.00       2.0         1.0\n[33,]             33    8.0     3.92       4.1         5.8\n[34,]             34    2.0     1.50       0.5        27.0\n[35,]             35    5.2     3.50       1.8         5.2\n[36,]             36    3.0     1.25       1.8        32.0\n[37,]             37    1.7     0.68       1.0         5.1\n[38,]             38    3.0     1.00       2.0         5.0\n[39,]             39    5.0     3.00       2.0         8.0\n[40,]             40    1.0     0.00       1.0         7.0\n      transfer.wt transfer.lab transfer.edge   n\n [1,]          48           44            43  24\n [2,]          78          107           104   2\n [3,]          77          118           116   2\n [4,]          75          128           128   2\n [5,]          74          133           133   2\n [6,]          73          158           159   2\n [7,]          76          163           164   2\n [8,]          72          173           174   2\n [9,]          71          184           185   2\n[10,]          69          208           209   2\n[11,]          68          209           210   2\n[12,]          67          218           219   2\n[13,]          70          222           223   2\n[14,]          65          234           235   2\n[15,]          66          251           251   2\n[16,]          63          273           273   2\n[17,]          64          290           290   2\n[18,]          62          303           303   2\n[19,]          60          313           313   2\n[20,]          61          317           317   2\n[21,]          45           25            26  73\n[22,]          39           45            45  40\n[23,]          55           29            28  49\n[24,]          50           49            50  87\n[25,]          95           74            76 110\n[26,]          56           50            50  24\n[27,]          76           72            72   2\n[28,]          71           62            63 168\n[29,]          85           96            97  73\n[30,]         142           86            85   9\n[31,]         163            2             2   2\n[32,]           2            1             1   1\n[33,]          64           49            48  40\n[34,]         195           13            11   2\n[35,]         119           26            24   4\n[36,]          10            7             6   4\n[37,]         185          138           137 114\n[38,]          28            1             1   1\n[39,]           2            1             1   1\n[40,]         197          204           205   1\n\n\n\n#plot network with community coloring\nplot(transfer.eigen,ig)\n\n\n\n\n\n\n#collect modularity scores to compare\nmods<-c(mods, eigen=modularity(transfer.eigen))\nmods\n\n\nfastgreedy   walktrap       edge      eigen \n0.34557252 0.23727168 0.02395912 0.25979327 \n\n\n\n#compare community partitions\ncompare.algs(alg.a=c(\"transfer.fg\",\"transfer.wt\", \"transfer.lab\", \"transfer.edge\"), alg.b=\"transfer.eigen\")\n\n\n           alg.a          alg.b          meth       result\n1    transfer.fg transfer.eigen            vi 3.214680e+00\n2    transfer.wt transfer.eigen            vi 3.940865e+00\n3   transfer.lab transfer.eigen            vi 3.471662e+00\n4  transfer.edge transfer.eigen            vi 3.479263e+00\n5    transfer.fg transfer.eigen           nmi 3.336722e-01\n6    transfer.wt transfer.eigen           nmi 4.410613e-01\n7   transfer.lab transfer.eigen           nmi 4.336873e-01\n8  transfer.edge transfer.eigen           nmi 4.319134e-01\n9    transfer.fg transfer.eigen    split.join 1.011000e+03\n10   transfer.wt transfer.eigen    split.join 9.190000e+02\n11  transfer.lab transfer.eigen    split.join 7.770000e+02\n12 transfer.edge transfer.eigen    split.join 7.790000e+02\n13   transfer.fg transfer.eigen          rand 8.175040e-01\n14   transfer.wt transfer.eigen          rand 8.572871e-01\n15  transfer.lab transfer.eigen          rand 7.076964e-01\n16 transfer.edge transfer.eigen          rand 7.066975e-01\n17   transfer.fg transfer.eigen adjusted.rand 1.184390e-01\n18   transfer.wt transfer.eigen adjusted.rand 4.629025e-02\n19  transfer.lab transfer.eigen adjusted.rand 1.530597e-02\n20 transfer.edge transfer.eigen adjusted.rand 1.492080e-02\n\n\n\n\n",
    "preview": "posts/2022-05-10-community-detection/community-detection_files/figure-html5/unnamed-chunk-10-1.png",
    "last_modified": "2022-05-25T11:40:53-04:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-09-network-status/",
    "title": "Network Status and Centrality",
    "description": "Who are the key actors in the football network? What makes them the key actors",
    "author": [
      {
        "name": "Isha Mahajan, Ankit Kumar",
        "url": {}
      }
    ],
    "date": "2022-05-09",
    "categories": [],
    "contents": "\nAssignment Description\nCalculate closeness, betweenness and eigenvector centrality measures for your network data, and bonachic-power if possible. Compare these measures to basic degree centrality measures. Try to interpret the results. Are there any interesting patterns in the distribution of measures or correlations between them that provide insight into the measures?\nYou may also want to identify whether the same node(s) are more/less central using the different measures, and see if you can find any patterns in the results based on which nodes are high/low on each measures. Discuss (with any related evidence) whether or not the node(s) behavior is in line with or violates expectations based on the degree centrality measure, comparing across those measures using a data frame similar to that constructed in the syntax. Be sure to share your assignment with group members for comments.\nEigenvector Centrality\nThe eigenvector centrality determines how important the neighborhood of the nodes is in the network. The higher the eigenvalue centrality, the more important the neighbors of that node are with respect to other nodes in the network. (Jackson 08) The eigenvalues also take into account the proximity of the node to many other important nodes in the network.\nAS Roma has the highest eigenvalue in the network. This can be an additional support to our previous speculation on how AS Roma might influential in the influx and outflow of football talent as they are well connected to the other influential nodes in our football transfer network.\n\n\ntemp <- igraph::centr_eigen(ig,directed=T)\ntransfer.nodes$eigen <- temp$vector\n#arrange descending and return top 5 nodes\nh <- arrange(transfer.nodes, desc(eigen))\nkable(head(h))\n\n\n\n\n\nname\n\n\ndegree\n\n\nindegree\n\n\noutdegree\n\n\neigen\n\n\nAS Roma\n\n\nAS Roma\n\n\n78\n\n\n39\n\n\n39\n\n\n1.0000000\n\n\nGenoa CFC\n\n\nGenoa CFC\n\n\n73\n\n\n46\n\n\n27\n\n\n0.9612356\n\n\nInter Milan\n\n\nInter Milan\n\n\n68\n\n\n32\n\n\n36\n\n\n0.8787351\n\n\nACF Fiorentina\n\n\nACF Fiorentina\n\n\n66\n\n\n38\n\n\n28\n\n\n0.7988873\n\n\nUS Sassuolo\n\n\nUS Sassuolo\n\n\n70\n\n\n35\n\n\n35\n\n\n0.7789739\n\n\nAC Milan\n\n\nAC Milan\n\n\n60\n\n\n38\n\n\n22\n\n\n0.7611737\n\n\nDerived and Reflected Centrality\nWe compute the derived and reflected Eigenvector centrality to better understand whether the influence is more observed in the neighborhood of the nodes or is it more observed on the strength of the node itself.\n\n\nmatrix <- as.matrix(as_adjacency_matrix(ig, attr = \"weight\"))\n#square the adjacency matrix\nmatsq<-t(matrix) %*% matrix\n#Calculate the proportion of reflected centrality.\ntransfer.nodes$rc<-diag(matsq)/rowSums(matsq)\n#replace missing values with 0\ntransfer.nodes$rc<-ifelse(is.nan(transfer.nodes$rc),0,transfer.nodes$rc)\n#Calculate received eigenvalue centrality\ntransfer.nodes$eigen.rc<-transfer.nodes$eigen*transfer.nodes$rc\n#Calculate the proportion of derived centrality.\ntransfer.nodes$dc<-1-diag(matsq)/rowSums(matsq)\n#replace missing values with 0\ntransfer.nodes$dc<-ifelse(is.nan(transfer.nodes$dc),1,transfer.nodes$dc)\n#Calculate received eigenvalue centrality\ntransfer.nodes$eigen.dc<-transfer.nodes$eigen*transfer.nodes$dc\n\n\n\n\n\nfilter(transfer.nodes,name%in%c(\"Chelsea FC\",\"FC Barcelona\"))\n\n\n                     name degree indegree outdegree     eigen\nFC Barcelona FC Barcelona     59       21        38 0.2704215\nChelsea FC     Chelsea FC     48       12        36 0.2449357\n                    rc   eigen.rc        dc  eigen.dc\nFC Barcelona 0.2218696 0.05999830 0.7781304 0.2104232\nChelsea FC   0.2352494 0.05762098 0.7647506 0.1873148\n\n\n\n##cen <- eigen_centrality(ig, directed = TRUE)\n#cen$vector\n\n\n\n\n\nlibrary(ggthemes)\ntransfer.nodes%>%\n  select(-name) %>% \n  gather() %>% \n  ggplot(aes(value)) +\n    geom_histogram() +\n    facet_wrap(~key, scales = \"free\")+\n    theme_minimal()\n\n\n\n\n\n\n#build on the dataframe\ntemp<-transfer.nodes %>% \n  select(degree,indegree,outdegree,eigen,eigen.rc,eigen.dc)%>%\n  correlate() %>%\n  rearrange()\n\n\n\n\n\nfashion(temp)\n\n\n       term outdegree degree indegree eigen.rc eigen.dc eigen\n1 outdegree              .94      .79      .67      .67   .69\n2    degree       .94             .95      .73      .79   .80\n3  indegree       .79    .95               .70      .82   .82\n4  eigen.rc       .67    .73      .70               .82   .86\n5  eigen.dc       .67    .79      .82      .82           1.00\n6     eigen       .69    .80      .82      .86     1.00      \n\n\n\nrplot(temp)\n\n\n\n\nBetweeness Centrality\nBetweeness centrality quantifies the number of times a node acts as a bridge along the shortest path between two other nodes.\n\n\ntransfer.nodes$betweeness <- igraph::betweenness(ig, directed=TRUE)\ntransfer.nodes%>%\narrange(desc(betweeness))%>%\nslice(1:5)\n\n\n                                 name degree indegree outdegree\nUC Sampdoria             UC Sampdoria     57       32        25\nOlympiacos Piraeus Olympiacos Piraeus     41       19        22\nGenoa CFC                   Genoa CFC     73       46        27\nACF Fiorentina         ACF Fiorentina     66       38        28\nHellas Verona           Hellas Verona     39       27        12\n                       eigen         rc   eigen.rc        dc\nUC Sampdoria       0.6156139 0.06250452 0.03847865 0.9374955\nOlympiacos Piraeus 0.1548258 0.02184055 0.00338148 0.9781595\nGenoa CFC          0.9612356 0.08798435 0.08457368 0.9120157\nACF Fiorentina     0.7988873 0.11743415 0.09381665 0.8825658\nHellas Verona      0.6603528 0.02847622 0.01880435 0.9715238\n                    eigen.dc betweeness\nUC Sampdoria       0.5771352   45262.42\nOlympiacos Piraeus 0.1514443   43409.28\nGenoa CFC          0.8766619   34603.48\nACF Fiorentina     0.7050706   31710.00\nHellas Verona      0.6415485   31489.50\n\nNetwork Constraint\n\n\ntransfer.nodes$constraint<-constraint(ig)\n\n\n\nAuthority\nAuthorities are those actors which get many incoming links from hubs, presumably because of their high quality relevant information. (Klien 16) In this case Juventus, Chelsea, Barcelona,PSG, Manchester United and Athleteco have the highest authority scores. This means that these clubs are attracting talent from the hubs like Real Madrid, which we will see includes Eden Hazard’s transfer in 2019\n\n\ntransfer.nodes$authority <- authority_score(ig)$vector\n\na <- transfer.nodes %>% \n  arrange(desc(authority))\nkable(head(a))\n\n\n\n\n\nname\n\n\ndegree\n\n\nindegree\n\n\noutdegree\n\n\neigen\n\n\nrc\n\n\neigen.rc\n\n\ndc\n\n\neigen.dc\n\n\nbetweeness\n\n\nconstraint\n\n\nauthority\n\n\nJuventus FC\n\n\nJuventus FC\n\n\n68\n\n\n27\n\n\n41\n\n\n0.6770212\n\n\n0.2150981\n\n\n0.1456259\n\n\n0.7849019\n\n\n0.5313953\n\n\n20394.667\n\n\n0.1013719\n\n\n1.0000000\n\n\nChelsea FC\n\n\nChelsea FC\n\n\n48\n\n\n12\n\n\n36\n\n\n0.2449357\n\n\n0.2352494\n\n\n0.0576210\n\n\n0.7647506\n\n\n0.1873148\n\n\n470.000\n\n\n0.1043159\n\n\n0.7752539\n\n\nFC Barcelona\n\n\nFC Barcelona\n\n\n59\n\n\n21\n\n\n38\n\n\n0.2704215\n\n\n0.2218696\n\n\n0.0599983\n\n\n0.7781304\n\n\n0.2104232\n\n\n4600.083\n\n\n0.0962553\n\n\n0.7566895\n\n\nParis Saint-Germain\n\n\nParis Saint-Germain\n\n\n37\n\n\n17\n\n\n20\n\n\n0.3905048\n\n\n0.2504831\n\n\n0.0978149\n\n\n0.7495169\n\n\n0.2926900\n\n\n1106.000\n\n\n0.1181023\n\n\n0.6491154\n\n\nManchester United\n\n\nManchester United\n\n\n29\n\n\n15\n\n\n14\n\n\n0.1991738\n\n\n0.2315679\n\n\n0.0461223\n\n\n0.7684321\n\n\n0.1530515\n\n\n1222.500\n\n\n0.0935063\n\n\n0.5523492\n\n\nAtlético de Madrid\n\n\nAtlético de Madrid\n\n\n48\n\n\n26\n\n\n22\n\n\n0.3488429\n\n\n0.1835874\n\n\n0.0640432\n\n\n0.8164126\n\n\n0.2847998\n\n\n1422.662\n\n\n0.0980257\n\n\n0.5507481\n\n\nHubs\nMany Ties to Peripheral Actors\n\n\ntransfer.nodes$hub_score <- hub_score(ig)$vector\nkable(head(transfer.nodes))\n\n\n\n\n\nname\n\n\ndegree\n\n\nindegree\n\n\noutdegree\n\n\neigen\n\n\nrc\n\n\neigen.rc\n\n\ndc\n\n\neigen.dc\n\n\nbetweeness\n\n\nconstraint\n\n\nauthority\n\n\nhub_score\n\n\nAston Villa\n\n\nAston Villa\n\n\n35\n\n\n27\n\n\n8\n\n\n0.2139009\n\n\n0.1837553\n\n\n0.0393054\n\n\n0.8162447\n\n\n0.1745954\n\n\n788.000\n\n\n0.1133398\n\n\n0.1109352\n\n\n0.2347654\n\n\nInter Milan\n\n\nInter Milan\n\n\n68\n\n\n32\n\n\n36\n\n\n0.8787351\n\n\n0.2193920\n\n\n0.1927874\n\n\n0.7806080\n\n\n0.6859477\n\n\n2799.590\n\n\n0.0962341\n\n\n0.2636786\n\n\n0.7339420\n\n\nBorussia Dortmund\n\n\nBorussia Dortmund\n\n\n45\n\n\n18\n\n\n27\n\n\n0.2370659\n\n\n0.1480322\n\n\n0.0350934\n\n\n0.8519678\n\n\n0.2019725\n\n\n2073.000\n\n\n0.0640196\n\n\n0.1477605\n\n\n0.5191494\n\n\nACF Fiorentina\n\n\nACF Fiorentina\n\n\n66\n\n\n38\n\n\n28\n\n\n0.7988873\n\n\n0.1174342\n\n\n0.0938166\n\n\n0.8825658\n\n\n0.7050706\n\n\n31709.998\n\n\n0.1108554\n\n\n0.0614752\n\n\n0.4296561\n\n\nReal Madrid\n\n\nReal Madrid\n\n\n46\n\n\n17\n\n\n29\n\n\n0.2296944\n\n\n0.2975292\n\n\n0.0683408\n\n\n0.7024708\n\n\n0.1613536\n\n\n4185.762\n\n\n0.1078723\n\n\n0.3925985\n\n\n1.0000000\n\n\nRB Leipzig\n\n\nRB Leipzig\n\n\n44\n\n\n26\n\n\n18\n\n\n0.3082591\n\n\n0.1717242\n\n\n0.0529356\n\n\n0.8282758\n\n\n0.2553235\n\n\n2936.417\n\n\n0.0909443\n\n\n0.1002923\n\n\n0.3521672\n\n\nConsider Real Madrid a hub given that their hub_score is 1. We can confirm this by looking at higher eigenvector derived centrality and lower reflected centrality.\nBridges\nA few ties to central actors =\n\n\nbridges(ig)\n\n\n+ 238/4386 edges from f1949b0 (vertex names):\n [1] Maccabi Haifa      ->Levski Sofia           \n [2] SC Farense         ->Vancouver Whitecaps FC \n [3] Moreirense FC      ->Al-Batin FC            \n [4] Grenoble Foot 38   ->FC Famalicão           \n [5] CA Fénix           ->FC Famalicão           \n [6] Maccabi Netanya    ->Hapoel Beer Sheva      \n [7] Ironi Kiryat Shmona->Hapoel Beer Sheva      \n [8] Hapoel Haifa       ->Hapoel Beer Sheva      \n [9] FC Basel 1893 U18  ->Juventus Primavera     \n[10] Amiens SC U19      ->Manchester United Youth\n+ ... omitted several edges\n\nbridges <- transfer.nodes %>% \n  filter(name == \"Maccabi Haifa\")\nkable(head(bridges))\n\n\n\n\n\nname\n\n\ndegree\n\n\nindegree\n\n\noutdegree\n\n\neigen\n\n\nrc\n\n\neigen.rc\n\n\ndc\n\n\neigen.dc\n\n\nbetweeness\n\n\nconstraint\n\n\nauthority\n\n\nhub_score\n\n\nMaccabi Haifa\n\n\nMaccabi Haifa\n\n\n1\n\n\n0\n\n\n1\n\n\n0\n\n\n0\n\n\n0\n\n\n1\n\n\n0\n\n\n0\n\n\n1\n\n\n0\n\n\n0\n\n\nWe test the understanding whether these teams actually serve as bridges in the network. By looking at the derived and reflected centrality scores, we see that the the reflected centrality for Maccabi Haifa is low while the derived centrality is high, thereby making it a bridge.\nCorrelations for Centrality Measures\n\n\nhead(transfer.nodes)\n\n\n                               name degree indegree outdegree\nAston Villa             Aston Villa     35       27         8\nInter Milan             Inter Milan     68       32        36\nBorussia Dortmund Borussia Dortmund     45       18        27\nACF Fiorentina       ACF Fiorentina     66       38        28\nReal Madrid             Real Madrid     46       17        29\nRB Leipzig               RB Leipzig     44       26        18\n                      eigen        rc   eigen.rc        dc  eigen.dc\nAston Villa       0.2139009 0.1837553 0.03930541 0.8162447 0.1745954\nInter Milan       0.8787351 0.2193920 0.19278741 0.7806080 0.6859477\nBorussia Dortmund 0.2370659 0.1480322 0.03509339 0.8519678 0.2019725\nACF Fiorentina    0.7988873 0.1174342 0.09381665 0.8825658 0.7050706\nReal Madrid       0.2296944 0.2975292 0.06834078 0.7024708 0.1613536\nRB Leipzig        0.3082591 0.1717242 0.05293556 0.8282758 0.2553235\n                  betweeness constraint  authority hub_score\nAston Villa          788.000 0.11333984 0.11093521 0.2347654\nInter Milan         2799.590 0.09623411 0.26367856 0.7339420\nBorussia Dortmund   2073.000 0.06401961 0.14776045 0.5191494\nACF Fiorentina     31709.998 0.11085545 0.06147522 0.4296561\nReal Madrid         4185.762 0.10787227 0.39259852 1.0000000\nRB Leipzig          2936.417 0.09094430 0.10029228 0.3521672\n\ncor<-transfer.nodes %>% \n  select(degree,eigen,betweeness, authority, hub_score)%>%\n  correlate() %>%\n  rearrange()\nrplot(cor)\n\n\n\n\nBrokerage\n\n\ntempo <-as.data.frame(brokerage(network, cl  = get.vertex.attribute(network,\"league\"))$raw.nli)\nhead(tempo)\n\n\n                  w_I w_O b_IO b_OI b_O   t\nAston Villa       209   0    0    0   0 209\nInter Milan       925   0    0    0   0 925\nBorussia Dortmund 416   0    0    0   0 416\nACF Fiorentina    897   0    0    0   0 897\nReal Madrid       420   0    0    0   0 420\nRB Leipzig        410   0    0    0   0 410\n\ntransfer.nodes<-transfer.nodes %>%\nmutate(broker.tot = tempo$t, # AS ROMA, AS Monaco, US Sassuolo, Genoa CFC, Atlanta BC\n       broker.coord = tempo$w_I,\n       broker.itin = tempo$w_O, # Aston Villa, Inter Milan, Borussia Dortmund, ACF florentina\n       broker.rep = tempo$b_IO, # # Aston Villa, Inter Milan, Borussia Dortmund, ACF florentina\n       broker.gate = tempo$b_OI,\n       broker.lia = tempo$b_O)\nbroker <- transfer.nodes %>% \n  arrange(desc(broker.tot)) %>% \n  slice(1:10)\nkable(head(broker))\n\n\n\n\n\nname\n\n\ndegree\n\n\nindegree\n\n\noutdegree\n\n\neigen\n\n\nrc\n\n\neigen.rc\n\n\ndc\n\n\neigen.dc\n\n\nbetweeness\n\n\nconstraint\n\n\nauthority\n\n\nhub_score\n\n\nbroker.tot\n\n\nbroker.coord\n\n\nbroker.itin\n\n\nbroker.rep\n\n\nbroker.gate\n\n\nbroker.lia\n\n\nAS Roma\n\n\nAS Roma\n\n\n78\n\n\n39\n\n\n39\n\n\n1.0000000\n\n\n0.1130986\n\n\n0.1130986\n\n\n0.8869014\n\n\n0.8869014\n\n\n20233.50\n\n\n0.0830009\n\n\n0.3603443\n\n\n0.2527186\n\n\n1286\n\n\n1286\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\nAS Monaco\n\n\nAS Monaco\n\n\n72\n\n\n39\n\n\n33\n\n\n0.3837432\n\n\n0.1410820\n\n\n0.0541392\n\n\n0.8589180\n\n\n0.3296040\n\n\n920.00\n\n\n0.0822568\n\n\n0.2386720\n\n\n0.6582977\n\n\n1157\n\n\n1157\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\nUS Sassuolo\n\n\nUS Sassuolo\n\n\n70\n\n\n35\n\n\n35\n\n\n0.7789739\n\n\n0.0487223\n\n\n0.0379534\n\n\n0.9512777\n\n\n0.7410205\n\n\n19581.79\n\n\n0.1146313\n\n\n0.1001784\n\n\n0.1704004\n\n\n1026\n\n\n1026\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\nGenoa CFC\n\n\nGenoa CFC\n\n\n73\n\n\n46\n\n\n27\n\n\n0.9612356\n\n\n0.0879843\n\n\n0.0845737\n\n\n0.9120157\n\n\n0.8766619\n\n\n34603.48\n\n\n0.1803853\n\n\n0.1525313\n\n\n0.4153337\n\n\n1015\n\n\n1015\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\nAtalanta BC\n\n\nAtalanta BC\n\n\n68\n\n\n35\n\n\n33\n\n\n0.7380989\n\n\n0.0801672\n\n\n0.0591713\n\n\n0.9198328\n\n\n0.6789275\n\n\n17953.23\n\n\n0.0997573\n\n\n0.1513361\n\n\n0.3371393\n\n\n966\n\n\n966\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\nInter Milan\n\n\nInter Milan\n\n\n68\n\n\n32\n\n\n36\n\n\n0.8787351\n\n\n0.2193920\n\n\n0.1927874\n\n\n0.7806080\n\n\n0.6859477\n\n\n2799.59\n\n\n0.0962341\n\n\n0.2636786\n\n\n0.7339420\n\n\n925\n\n\n925\n\n\n0\n\n\n0\n\n\n0\n\n\n0\n\n\nAS Roma plays a role of coordinator in the network which means that many ties go to and from AS Roma. This is in alignment with the degrees of the network as we saw earlier and the Eigenvector centrality which was also the highest for AS Roma in the network.\nAston Villa is an iterant broker in the network.\n\n\n\n",
    "preview": "posts/2022-05-09-network-status/network-status_files/figure-html5/unnamed-chunk-6-1.png",
    "last_modified": "2022-05-25T12:12:06-04:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-09-structural-equivalence/",
    "title": "Structural Equivalence and Blockmodels",
    "description": "Denodgrams and blocks",
    "author": [
      {
        "name": "Isha Mahajan, Ankit Kumar",
        "url": {}
      }
    ],
    "date": "2022-05-09",
    "categories": [],
    "contents": "\nStructural Equivilence and Dendograms\nFor this week, we worked on Structural Equivalence models on our data to observe groups of clubs that might have similar attributes. Given the large size of our edgelist, it is not prudent to cluster in a large dataset with so many nodes. In this blog, we split the data with two parameters. First, differentiating by the year variable which is essentially the season of the transfer, and the weight of the edges i.e the amount of the transfer. These are split into three further categories - small , medium and expensive transfers. We chose this strategy because we fee that this would align with understanding the roles of brokers and clubs with higher degrees in our network. We run two kinds of equivalence clusters - first using the average method and the hamming distance, and the other using the lead eigenvector.\nThe cluster_lead_eigen function finds densely connected subgraphs in the network by calculating the leading non-negative eigenvector of the modularity matrix of the graph. (igraph package)\n\n\nlibrary(igraph)\nlibrary(tidyverse)\nlibrary(corrr)\nlibrary(intergraph)\nlibrary(statnet)\nlibrary(network)\nlibrary(sna)\nlibrary(ggplot2)\nlibrary(kableExtra)\n\n\n\nTransfers 2019\nExpensive Transfers\n\n\n#convert data into matrix format\ndata.mat.exp <- as.matrix(expensive_transfers_2019)\n#create igraph object from data\nig.exp.19 <- graph_from_data_frame(data.mat.exp, directed = TRUE)\n# add edge attribute weight i.e transfer fee\nig.exp.19 <- set_edge_attr(ig.exp.19, \"weight\", value = na.omit(expensive_transfers_2019$fee))\nig.exp.19 <- delete_edge_attr(ig.exp.19, \"fee\")\n#check summary of the igraph object\nsummary(ig.exp.19)\n\n\nIGRAPH bf64324 DNW- 185 157 -- \n+ attr: name (v/c), name (e/c), weight (e/n)\n\nnetwork.exp.19 <- intergraph::asNetwork(ig.exp.19) \nnetwork.exp.19\n\n\n Network attributes:\n  vertices = 185 \n  directed = TRUE \n  hyper = FALSE \n  loops = FALSE \n  multiple = TRUE \n  bipartite = FALSE \n  total edges= 157 \n    missing edges= 0 \n    non-missing edges= 157 \n\n Vertex attribute names: \n    vertex.names \n\n Edge attribute names: \n    name weight \n\n\n\nmatrix.exp.19 <- as.matrix(as_adjacency_matrix(ig.exp.19, attr = \"weight\"))\ntransfer.se.exp<-equiv.clust(matrix.exp.19, equiv.fun=\"sedist\", cluster.method=\"average\", method=\"hamming\",mode=\"graph\")\nplot(transfer.se.exp,labels=transfer.se.exp$glabels, cex = 0.2, main=\"Cluster Dendrogram Expensive 2019 Transfers-  Hamming (Average)\")\nrect.hclust(transfer.se.exp$cluster, k = 3) \n\n\n\n\n\n\nplot_dendrogram(cluster_leading_eigen(as.undirected(ig.exp.19)), mode = igraph_opt(\"dend.plot.type\"))\n\n\n\n\nMedium Transfers\n\n\n#convert data into matrix format\ndata.mat.med <- as.matrix(medium_transfers_2019)\n#create igraph object from data\nig.med.19 <- graph_from_data_frame(data.mat.med, directed = TRUE)\n# add edge attribute weight i.e transfer fee\nig.med.19<- set_edge_attr(ig.med.19, \"weight\", value = na.omit(medium_transfers_2019$fee))\nig.med.19<- delete_edge_attr(ig.med.19, \"fee\")\n#check summary of the igraph object\nsummary(ig.med.19)\n\n\nIGRAPH 3ffce03 DNW- 461 718 -- \n+ attr: name (v/c), name (e/c), weight (e/n)\n\nnetwork.med.19 <- intergraph::asNetwork(ig.med.19) \nnetwork.med.19\n\n\n Network attributes:\n  vertices = 461 \n  directed = TRUE \n  hyper = FALSE \n  loops = FALSE \n  multiple = TRUE \n  bipartite = FALSE \n  total edges= 718 \n    missing edges= 0 \n    non-missing edges= 718 \n\n Vertex attribute names: \n    vertex.names \n\n Edge attribute names: \n    name weight \n\n\n\nmatrix.med.19 <- as.matrix(as_adjacency_matrix(ig.med.19, attr = \"weight\"))\ntransfer.se.med<-equiv.clust(matrix.med.19, equiv.fun=\"sedist\", cluster.method=\"average\", method=\"hamming\",mode=\"graph\")\nplot(transfer.se.med,labels=transfer.se.med$glabels, cex = 0.2, main=\"Cluster Dendrogram Medium 2019 Transfers - Hamming (Average)\")\nrect.hclust(transfer.se.med$cluster, k = 3) \n\n\n\n\n\n\nplot_dendrogram(cluster_leading_eigen(as.undirected(ig.med.19)), mode = igraph_opt(\"dend.plot.type\"))\n\n\n\n\nSmall Transfers\n\n\n#convert data into matrix format\ndata.mat.sm <- as.matrix(small_transfers_2019)\n#create igraph object from data\nig.sm.19 <- graph_from_data_frame(data.mat.sm, directed = TRUE)\n# add edge attribute weight i.e transfer fee\nig.sm.19<- set_edge_attr(ig.sm.19, \"weight\", value = na.omit(small_transfers_2019$fee))\nig.sm.19<- delete_edge_attr(ig.sm.19, \"fee\")\n#check summary of the igraph object\nsummary(ig.sm.19)\n\n\nIGRAPH ba13c7e DNW- 283 312 -- \n+ attr: name (v/c), name (e/c), weight (e/n)\n\nnetwork.sm.19 <- intergraph::asNetwork(ig.sm.19) \nnetwork.sm.19\n\n\n Network attributes:\n  vertices = 283 \n  directed = TRUE \n  hyper = FALSE \n  loops = FALSE \n  multiple = TRUE \n  bipartite = FALSE \n  total edges= 312 \n    missing edges= 0 \n    non-missing edges= 312 \n\n Vertex attribute names: \n    vertex.names \n\n Edge attribute names: \n    name weight \n\n\n\nmatrix.sm.19 <- as.matrix(as_adjacency_matrix(ig.sm.19, attr = \"weight\"))\ntransfer.se.sm<-equiv.clust(matrix.sm.19, equiv.fun=\"sedist\", cluster.method=\"average\", method=\"hamming\",mode=\"graph\")\nplot(transfer.se.sm,labels=transfer.se.sm$glabels,cex = 0.2, main=\"Cluster Dendrogram Small 2019 Transfers - Hamming (Average)\")\nrect.hclust(transfer.se.sm$cluster, k = 3) \n\n\n\n\n\n\n#dd <- plot_dendrogram(cluster_leading_eigen(as.undirected(ig.sm.19)), mode = igraph_opt(\"dend.plot.type\"))\n#dd\n\n\n\nBlock Modeling\n\n\ng_mat <- as.matrix(get.adjacency(simplify(ig.exp.19)))\ng_eq <- equiv.clust(g_mat, mode = \"graph\")\nplot(g_eq)\n\n\n\ng_block <- blockmodel(g_mat, g_eq, h= 5, mode=\"graph\")\nplot(g_block, cex=0.1)\n\n\n\ngplot(g_mat, vertex.col = g_block$block.membership, gmode=\"graph\")\n\n\n\ngplot(g_block$block.model, gmode=\"graph\", label=rownames(g_block$block.model), edge.lwd = g_block$block.model*10)\n\n\n\nplot(density(g_block$block.membership))\n\n\n\n# for this package to work, we will need to return to our original artist-artist adjacency matrix\n\n\n\n\n\n\n",
    "preview": "posts/2022-05-09-structural-equivalence/structural-equivalence_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2022-05-25T13:10:21-04:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-08-exploring-european-football-transfer-networks/",
    "title": "Exploring European Football Transfer Networks",
    "description": "Exploring a network of football teams and the transactions they made from 2018-2021. \nAn Edgelist maybe?",
    "author": [
      {
        "name": "Isha Akshita Mahajan, Ankit Kumar",
        "url": {}
      }
    ],
    "date": "2022-05-08",
    "categories": [],
    "contents": "\nLoad Required Packages\n\n\nlibrary(igraph)\nlibrary(tidyverse)\nlibrary(corrr)\nlibrary(intergraph)\nlibrary(statnet)\nlibrary(network)\nlibrary(sna)\nlibrary(ggplot2)\nlibrary(kableExtra)\n\n\n\nLoad the data\nI begin by converting the data into an edgelist format. I select the club from and club to columns which are our nodes in this case. The relationship that I’m interested in is where from and where to has the majority of transfers taken place across various places. After selecting the from and to columns, I select the players, the transfer fee and the season in which the transfer took place. I also remove loan and free transfer as they don’t seem relevant at the moment.\n\n\n#load data from CSV\ntransfers <- read_csv(\"/Users/isha/Desktop/GitHub/transfernetworks.csv\")\n#select relevant data for edgelist format\ndata <- transfers %>% \n  select(club_from, club_to, name,fee) %>% \n  filter(fee != \"free transfer\") %>% \n  filter(fee != \"loan transfer\") %>% \n  filter (fee != 0)\ndata$fee <- as.numeric(data$fee) \ndata <- data %>% \nfilter(fee != is.na(fee))\nany(is.na(data$fee))\n\n\n[1] FALSE\n\nkable(head(data))\n\n\n\nclub_from\n\n\nclub_to\n\n\nname\n\n\nfee\n\n\nAston Villa\n\n\nManchester City\n\n\nJack Grealish\n\n\n1.17e+08\n\n\nInter Milan\n\n\nChelsea FC\n\n\nRomelu Lukaku\n\n\n1.13e+08\n\n\nBorussia Dortmund\n\n\nManchester United\n\n\nJadon Sancho\n\n\n8.50e+07\n\n\nACF Fiorentina\n\n\nJuventus FC\n\n\nDušan Vlahović\n\n\n8.10e+07\n\n\nReal Madrid\n\n\nManchester United\n\n\nRaphaël Varane\n\n\n4.00e+07\n\n\nInter Milan\n\n\nParis Saint-Germain\n\n\nAchraf Hakimi\n\n\n6.60e+07\n\n\nCreate Edgelist (Part 1)\nThe edgelist I created consists of 867 nodes and 4386 ties. The edge attributes are the players who are being transferred. The weight of the edges is the fee for which they were transferred. The edgelist is directed because the players are transferring from one team to another.\n\n\n#convert data into matrix format\ndata.mat <- as.matrix(data)\n#create igraph object from data\nig <- graph_from_data_frame(data.mat, directed = TRUE)\n# add edge attribute weight i.e transfer fee\nig <- set_edge_attr(ig, \"weight\", value = na.omit(data$fee))\n# add edge attribute season of transfer\n#ig<-  set_edge_attr(ig, \"season\", value = na.omit(data$season))\n# add node attribute i.e league the club belongs to\n#set_vertex_attr(ig,\"league\" ,value = node_attr)\n#delete edge attribute that was automatically being created in addition to weight\nig <- delete_edge_attr(ig, \"fee\")\n#check summary of the igraph object\nsummary(ig)\n\n\nIGRAPH 1b96174 DNW- 867 4386 -- \n+ attr: name (v/c), name (e/c), weight (e/n)\n\n#convert ig network into intergraph object to coerce with statnet\nnetwork <- intergraph::asNetwork(ig) \nnetwork\n\n\n Network attributes:\n  vertices = 867 \n  directed = TRUE \n  hyper = FALSE \n  loops = FALSE \n  multiple = TRUE \n  bipartite = FALSE \n  total edges= 4386 \n    missing edges= 0 \n    non-missing edges= 4386 \n\n Vertex attribute names: \n    vertex.names \n\n Edge attribute names not shown \n\n\n\n#plot intergraph object\nplot(network)\n\n\n\n\nExploring Network Structures\n\n\n#count the number of nodes\nvcount(ig)\n\n\n[1] 867\n\n# count the number of edges\necount(ig)\n\n\n[1] 4386\n\nThe network consists of 867 nodes and 4386 edges. This means that there are 867 football clubs in our network and we are going to be explore the transfer of players that has taken place in the last four years i.e 8 transfer windows.\n\n\n# look at the dyad census\ndyad_census(ig)\n\n\n$mut\n[1] 201\n\n$asym\n[1] 3468\n\n$null\n[1] 371742\n\nThere are 201 mutual, 3468 asymmetrical and 371742 dyads\n\n\ntriad_census(ig)\n\n\n [1] 105140687   2584373    450247     12854     17067     27123\n [7]      4389      3716      1486       339       380       182\n[13]       194       306       134        28\n\ntriangles(ig)\n\n\n+ 8007/867 vertices, named, from 1b96174:\n   [1] SL Benfica                      \n   [2] Borussia Dortmund               \n   [3] Eintracht Frankfurt             \n   [4] SL Benfica                      \n   [5] Borussia Dortmund               \n   [6] PSV Eindhoven                   \n   [7] SL Benfica                      \n   [8] Borussia Dortmund               \n   [9] CA Boca Juniors                 \n  [10] SL Benfica                      \n+ ... omitted several vertices\n\n\n\nis_directed(ig)\n\n\n[1] TRUE\n\nis_weighted(ig)\n\n\n[1] TRUE\n\nis_bipartite(ig)\n\n\n[1] FALSE\n\nThe results suggest that the network is directed, i.e players are transferring from one club to another.\nThe network is weighted. The weight of the transfer is the fee for which the transfer was made.\nThe network is not bipartite which mean that they transfers are not in sets- there is a flow of transfers of players in the network.\nTransitivity\n\n\n#get global clustering cofficient: igraph\ntransitivity(ig, type=\"global\")\n\n\n[1] 0.1088854\n\n#get average local clustering coefficient: igraph\ntransitivity(ig, type=\"average\")\n\n\n[1] 0.1058294\n\nThe global transitivity of the graph is 0.1088854 which is the ratio of triangles connected to triangles\nthe average transitivity 0.1058294 is the transitivity of the local triad clusters, i.e. the ratio of local triangles to all connected triangles.\nPath Lengths\nThe average path length in the weighted network is 5689620.\n\n\naverage.path.length(ig)\n\n\n[1] 5689620\n\nThe shortest_paths function enables us to look at the shortest parts between two nodes. Let’s explore some shortest between football clubs of various leagues.\n\n\nshortest_paths(ig,\"Chelsea FC\", \"Liverpool FC\")$vpath[[1]]\n\n\n+ 6/867 vertices, named, from 1b96174:\n[1] Chelsea FC        Spartak Moscow    SC Freiburg      \n[4] 1.FC Union Berlin FC Schalke 04     Liverpool FC     \n\nshortest_paths(ig, \"FC Porto\", \"Juventus FC\")$vpath[[1]]\n\n\n+ 6/867 vertices, named, from 1b96174:\n[1] FC Porto       AS Roma        ACF Fiorentina Hellas Verona \n[5] SS Lazio       Juventus FC   \n\nshortest_paths(ig, \"Bayern Munich\", \"Aston Villa\")$vpath[[1]]\n\n\n+ 9/867 vertices, named, from 1b96174:\n[1] Bayern Munich       TSG 1899 Hoffenheim VfB Stuttgart      \n[4] SC Braga            Olympiacos Piraeus  Red Star Belgrade  \n[7] UD Las Palmas       LOSC Lille          Aston Villa        \n\n\n\ndistances(ig,\"Chelsea FC\", \"Real Madrid\")\n\n\n           Real Madrid\nChelsea FC       8e+05\n\ndistances(ig, \"Bayern Munich\", \"Chelsea FC\")\n\n\n              Chelsea FC\nBayern Munich    1050000\n\n\n\naverage.path.length(ig)\n\n\n[1] 5689620\n\nThe distance between Chelsea and FC Barcelona is 1.6 nodes.\nComponent Structure\n\n\nnames(igraph::components(ig))\n\n\n[1] \"membership\" \"csize\"      \"no\"        \n\nigraph::components(ig)$no\n\n\n[1] 20\n\nigraph::components(ig)$csize\n\n\n [1] 829   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2\n[17]   2   2   2   2\n\n#igraph::components(ig)$membership\n\n\n\nThere are 20 components in this network. The largest component consists of 829 nodes and the rest nineteen components comprise of two nodes each.\n\n\n\n",
    "preview": "posts/2022-05-08-exploring-european-football-transfer-networks/exploring-european-football-transfer-networks_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2022-05-25T11:16:33-04:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-08-network-degree/",
    "title": "Network Degree",
    "description": "Network Degree of Football Networks",
    "author": [
      {
        "name": "Isha Mahajan, Ankit Kumar",
        "url": {}
      }
    ],
    "date": "2022-05-08",
    "categories": [],
    "contents": "\nAssignment Description\nBriefly describe the dataset you are using: identify initial network format, describe and identify the nodes (including how many nodes are in the dataset), what constitutes a tie or edge (including how many ties, whether ties are directed/undirected and weighted/binary, and how to interpret the value of the tie if any), whether or not there are edge attributes that might be used to subset data or stack multiple networks (e.g., tie type, year, etc). Not every feature of the network needs to be described, but description should orient reader to the network data and provide any necessary context for the results provided.\nProvide at least two or three noteworthy results, including the relevant statistics and interpretation. For example, explaining which node(s) are most central and which are least central. Discuss (with any related evidence) whether or not the node(s) behavior is in line with or violates expectations based on the degree centrality measure. What do you make of network density and centralization measures?\nDensity\n\n\ngraph.density(ig, loops = FALSE)\n\n\n[1] 0.005841598\n\nThe network density of the football transfer network is 0.005 which indicates that the 0.5% of all possible ties in the network are made. In this case we would leave the loops value as false because it is not possible for a football team to transfer a player back to their own team.\nDegree\nThe degree measures the node centrality or a popularity of a node. It gives a count of the relationships that a node is involved in or the number of edges it has. Given that the goal of these blogs to keep all these important network properties in one place, I begin by creating a dataframe that I’ll keep on building as I create these blogs. I call this data frame transfer.nodes.\n\n\n#create degree column\ntransfer.nodes<-data.frame(name=V(ig)$name, degree=igraph::degree(ig))\n#create indegree and outdegree column\ntransfer.nodes<-transfer.nodes %>%\n           mutate(indegree=igraph::degree(ig, mode=\"in\", loops=FALSE),\n           outdegree=igraph::degree(ig, mode=\"out\", loops=FALSE))\n\n\n\n\n\n# clubs that have the highest relationships in the network\ndegree <- transfer.nodes %>% \n  arrange(desc(degree)) \nkable(head(degree))\n\n\n\n\n\nname\n\n\ndegree\n\n\nindegree\n\n\noutdegree\n\n\nAS Roma\n\n\nAS Roma\n\n\n78\n\n\n39\n\n\n39\n\n\nGenoa CFC\n\n\nGenoa CFC\n\n\n73\n\n\n46\n\n\n27\n\n\nAS Monaco\n\n\nAS Monaco\n\n\n72\n\n\n39\n\n\n33\n\n\nUS Sassuolo\n\n\nUS Sassuolo\n\n\n70\n\n\n35\n\n\n35\n\n\nInter Milan\n\n\nInter Milan\n\n\n68\n\n\n32\n\n\n36\n\n\nJuventus FC\n\n\nJuventus FC\n\n\n68\n\n\n27\n\n\n41\n\n\n# Clubs that recieved the most transfers.\nindegree <- transfer.nodes %>% \n  arrange(desc(indegree)) \nkable(head(indegree))\n\n\n\n\n\nname\n\n\ndegree\n\n\nindegree\n\n\noutdegree\n\n\nGenoa CFC\n\n\nGenoa CFC\n\n\n73\n\n\n46\n\n\n27\n\n\nAS Roma\n\n\nAS Roma\n\n\n78\n\n\n39\n\n\n39\n\n\nAS Monaco\n\n\nAS Monaco\n\n\n72\n\n\n39\n\n\n33\n\n\nACF Fiorentina\n\n\nACF Fiorentina\n\n\n66\n\n\n38\n\n\n28\n\n\nAC Milan\n\n\nAC Milan\n\n\n60\n\n\n38\n\n\n22\n\n\nParma Calcio 1913\n\n\nParma Calcio 1913\n\n\n48\n\n\n38\n\n\n10\n\n\n# Clubs that transferred the most.\noutdegree <- transfer.nodes %>% \narrange(desc(outdegree)) \nkable(head(outdegree))\n\n\n\n\n\nname\n\n\ndegree\n\n\nindegree\n\n\noutdegree\n\n\nJuventus FC\n\n\nJuventus FC\n\n\n68\n\n\n27\n\n\n41\n\n\nSporting CP\n\n\nSporting CP\n\n\n63\n\n\n24\n\n\n39\n\n\nAS Roma\n\n\nAS Roma\n\n\n78\n\n\n39\n\n\n39\n\n\nFC Barcelona\n\n\nFC Barcelona\n\n\n59\n\n\n21\n\n\n38\n\n\nSL Benfica\n\n\nSL Benfica\n\n\n63\n\n\n25\n\n\n38\n\n\nInter Milan\n\n\nInter Milan\n\n\n68\n\n\n32\n\n\n36\n\n\nAS ROMA has the highest degree in our football transfer network. Both the in degree and the out degrees hold a value of 39. This means that 39 transfer of players have left the club and 39 players have come in to the club.This makes me wonder if AS ROMA is a club which might be serving like a starting point for various players to move towards the major football leagues. But there might be better ways to explore that later in the analysis.\nGenoa FC has the indegree of 46 which means they’ve had 46 transfers to their club.\nJuventus FC has the highest ourdegree which means they’ve transferred 41 players out of the club.\n\n\n#V(ig)$name\nroma_movement <- incident(ig, 66, mode = c(\"all\"))\n\n\n\n\n\n#table(head_of(ig, E(ig)))\n\n\n\n\n\n# make a basic plot\nplot(ig, \n     vertex.label.color = \"black\", \n     edge.color = 'gray77',\n     vertex.size = 6,\n     edge.arrow.size = 0.1,\n     layout = layout_nicely(ig))\n\n\n\n\nDegree Distributions\n\n\n#create a histogram of Transfer Indegree\nhist(transfer.nodes$indegree, main=\"Football Transfers: In-degree Distribution\", xlab=\"Players Recieved\")\n\n\n\n\n\n\n#create a histogram of Transfer Indegree\nhist(transfer.nodes$outdegree, main=\"Football Transfers: Out-degree Distribution\", xlab=\"Players Transferred\")\n\n\n\n\nNetwork Degree Centralization\nAdd Interpretation, check if loops are supposed to be true or false\n\n\n#get network centralization score: igraph\ncentr_degree(ig, loops = FALSE, mode=\"in\")$centralization\n\n\n[1] 0.04733078\n\ncentr_degree(ig, loops = FALSE, mode=\"out\")$centralization\n\n\n[1] 0.04155044\n\n\n\n\n",
    "preview": "posts/2022-05-08-network-degree/network-degree_files/figure-html5/unnamed-chunk-9-1.png",
    "last_modified": "2022-05-25T12:47:36-04:00",
    "input_file": {}
  },
  {
    "path": "posts/welcome/",
    "title": "Introduction to Football Networks",
    "description": "In this blog, We'll be referring to soccer as football -- since it's played with a foot.",
    "author": [
      {
        "name": "Isha Akshita Mahajan, Ankit Kumar",
        "url": {}
      }
    ],
    "date": "2022-05-08",
    "categories": [],
    "contents": "\nTransfer of players in European Football\nThis blog is an attempt to examine a social network of football transfers in major football leagues. The data was extracted using web scraping techniques from transfermarket.co.uk which is known to be a reliable source for data on players and their movement in various sports.\nUnlike American sports, where players transfer from one team to another either through contracts or through their agents. It is more like a trade. However, in the football transfer system, the players move from one team to another by the selling and buying process. The transaction that is made during the process is considered to be a transfer fee and is the amount that one team is paying to another while transferring the player. Usually 5 or 10 percent of this fee goes to the player themself.\nThese transactions happen during transfer windows which are similar to trade deadlines in the NBA. However, unlike a specific date, it is a window of time during which football clubs buy and sell players. These transfer windows in most European leagues are during the summer summer and winter.\nIn addition to transfers by paying money, players also move from one club to another on loans where they can temporally play for a team for which they dont have a contract. There is no transaction between the clubs however the club is still responsible for paying the player’s fee.\nWebscraping\nThe data was scraped using python and the script is attached to this blog. We extracted data from the year 2018-2021 which is 4 years and 8 transfer windows. We removed the free and loan transfers because they don’t show a transaction between the club.\n\n\n\n",
    "preview": {},
    "last_modified": "2022-05-25T12:10:03-04:00",
    "input_file": {}
  }
]
